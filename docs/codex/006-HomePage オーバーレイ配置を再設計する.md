HomePage オーバーレイ配置を再設計する
===

## 背景
直近の修正で、選択肢を画像上のメッセージ下へ重ねる構成にはできた。  
ただし実表示では、メッセージ + 選択肢エリアが内部で右にズレたり隠れて見える問題が残っている。

## 今回の要望
- いまの実装をいったん捨てて、配置のズレを出さないエレガントな構成に再設計する。
- 選択肢ボタン色は以前と同じ見た目 ( `primary.main` ベース ) を維持する。
- 全体幅はやや絞った状態を保つ。

## ゴール
- メッセージ + 選択肢オーバーレイが画像幅に対して正しく収まり、左右どちらにもはみ出さない。
- 選択肢はメッセージ直下で 2 列 ( モバイルは 1 列 ) 表示される。
- 選択肢カード色は従来どおりのトーンになる。

## 非ゴール
- シーン遷移ロジックやダイアログ仕様の変更。
- インベントリ機能の UI 刷新。

## 変更対象の候補
- `webapp/frontend-react/src/pages/HomePage.tsx`
- `docs/codex/006-HomePage オーバーレイ配置を再設計する.md`

## 進め方
このノートで設計を固め、レビュー反映後に実装する。

## 詳細設計
### 1. 問題の原因整理
- 画像オーバーレイ内で `Grid container` を使うと、余白計算 ( spacing の負マージンなど ) と絶対配置が干渉しやすい。
- この組み合わせが、右端の欠けや内部ズレの主因になっている。

### 2. 解決方針 ( エレガント版 )
- オーバーレイは `position: absolute` + `left: 0` + `right: 0` + `bottom: 0` で固定する。
- オーバーレイ本体に `boxSizing: border-box` を明示して、padding 起因のはみ出しを防ぐ。
- オーバーレイ内部は `Grid` ではなく `Box` の CSS Grid で統一し、幅計算をシンプルにする。
- 選択肢カードは `primary.main` に戻し、過去の視認性トーンを維持する。

### 3. レイアウト仕様
- 画面全体は `maxWidth: 960` のラッパーで中央寄せする。
- 左カラム: シーン画像 + 下部オーバーレイ ( メッセージ + 選択肢 ) 。
- 右カラム: バナナメーター + インベントリのみ。
- 選択肢は `gridTemplateColumns: { xs: \"1fr\", sm: \"repeat(2, minmax(0, 1fr))\" }` 。

### 4. 実装タスク ( 予定 )
1. `HomePage.tsx` のオーバーレイ部分を CSS Grid ベースへ置き換える。  
2. 選択肢カード色を `primary.main` ベースに統一する。  
3. 全体幅の `maxWidth` を再調整して画像サイズを適正化する。  
4. lint で文法・スタイル問題がないことを確認する。  

### 5. 確認観点
- メッセージ + 選択肢が画像内に収まり、右端の欠けが出ないこと。
- 選択肢が `sm` 以上で 2 列、 `xs` で 1 列になること。
- 選択肢ボタン色が以前と同系色 ( `primary.main` ) であること。
- 選択肢クリックのダイアログ遷移が従来通り動くこと。

### 6. 受け入れ条件
- 配置ズレ・欠けがなく、視認上の破綻がない。  
- ボタン色が要求どおり旧トーンへ戻っている。  
- `yarn lint` が通る。  

## レビュー
### 指摘 1 ( 重要 ): オーバーレイ幅の境界指定を明記してほしい
今回の不具合は横方向の境界計算が主因なので、 `left/right` の両指定と `boxSizing` の扱いを実装仕様で明言したい。  
ここが曖昧だと再発しやすい。

対応要求:
- オーバーレイ本体に `left: 0` と `right: 0` を入れることを明記すること。
- 必要なら `boxSizing: border-box` を併記すること。

対応内容 ( プランナー記入 ) :
- 妥当な指摘。実装仕様に `left: 0` / `right: 0` / `bottom: 0` の明示を維持した。  
- あわせて `boxSizing: border-box` を追加し、padding 起因の横はみ出しを防ぐ方針に更新した。  

### 指摘 2 ( 中 ): 全体幅の数値を具体化してほしい
「少し狭める」だと実装者判断がぶれやすい。  
ターゲット値を仮決めしたほうがレビューもしやすい。

対応要求:
- `maxWidth` の目安値を明記すること ( 例: `960` ) 。

対応内容 ( プランナー記入 ) :
- 妥当な指摘。 `maxWidth: 960` を設計値として固定した。  

### 再レビュー結果
2 件とも設計本文へ反映され、再発防止の観点が具体化されている。  
この内容で実装へ進んで問題ない。

結論:
- LGTM。レビュー完了。

## 実装結果
- `HomePage.tsx` の全体ラッパーを `maxWidth: 960` に変更して、画像サイズを抑えた。
- オーバーレイ本体に `left: 0` / `right: 0` / `bottom: 0` と `boxSizing: border-box` を適用した。
- オーバーレイ内の選択肢は CSS Grid (`Box`) で維持し、幅計算の安定性を優先した。
- 選択肢カード色は `primary.main` に統一し、旧トーンへ戻した。
- 検証:
  - `docker compose exec react-service yarn lint` 成功。

## オーナー向け要約
- 今回は既存実装を前提にせず、オーバーレイ配置を再設計した。  
- ズレ対策として `left/right` 固定と `boxSizing: border-box` を明示し、幅計算のブレを消す。  
- オーバーレイ内は CSS Grid で統一して、選択肢 2 列表示を安定化する。  
- ボタン色は `primary.main` に戻し、全体幅は `maxWidth: 960` に絞ってバランスを整える。  
