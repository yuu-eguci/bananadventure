このプロジェクトの概要書
===

## 目的とコンセプト
このプロジェクトは、選択肢で進むストーリー型のゲームを作るための土台です。  
ゲームの進行は「シーン」と「選択肢」と「アイテム」で構成され、バナナメーターの増減がゲーム体験に影響します。

## 体験の流れの現状
ユーザーはシーン画像とテキストを読み、選択肢を押してストーリーを進めます。  
選択肢によってバナナメーターが変化し、アイテムを獲得できます。  
アイテムは条件付きでシーンを分岐させるトリガーにもなります。

## 技術スタック
Backend は Django 4.2 + Django REST framework です。  
Database は MySQL を使います。  
Frontend は React 19 + TypeScript + Vite です。  
UI は MUI を使います。  
翻訳基盤は i18next を使います。初期言語は `en` です。

## 実装アーキテクチャの現状
ゲームロジックは Frontend で完結しています。  
`SceneService` が JSON データを読み込み、 `SceneViewModel` を生成します。  
`HomePage` が ViewModel を受け取り、シーン表示と選択肢の更新を行います。  
Backend は `foo` / `bar` / `baz` の API サンプルがある段階です。

## データモデルとルール
モデルの概念設計は `BLUEPRINT.md` にまとまっています。  
実装上のデータ定義は `webapp/frontend-react/src/models.ts` にあります。  
シーンデータは `webapp/frontend-react/src/data/bananadventure-scenes.json` で管理しています。  
バナナメーターが 0 以下になるとゲームオーバー用シーンへ遷移します。  
ゲームオーバー用シーンの ID は `SceneService` 内で 15 に固定しています。

## 主要ディレクトリ
`webapp/`: Django と React の作業場所です。  
`webapp/app/`: Django の API 実験用エンドポイントがあります。  
`webapp/frontend-react/`: React の画面とゲームロジックがあります。  
`webapp/frontend-react/src/data/`: シーン JSON データがあります。  
`webapp/shared/`: 例外ハンドラやログフォーマッタなどの共有部品があります。  
`webapp/middlewares/`: リクエスト ID を付与するミドルウェアがあります。  
`webapp-container/`: Web アプリ用の Dockerfile があります。  
`mysql-container/`: MySQL 用の Dockerfile があります。  
`.github/workflows/ci.yml`: Django と React の CI があります。

## 開発と実行の要点
Docker Compose で MySQL と Web アプリのコンテナを起動します。  
ローカル環境は `local.env` を `.env` にコピーして使います。  
Django は `http://localhost:8001/` 、 React は `http://localhost:5001/` で確認できます。  
詳細な手順は `README.md` を参照してください。

## 今の位置づけ
Frontend のゲーム体験は動くところまで整っています。  
Backend は API の雛形と共通基盤が整っている段階です。  
今後は `BLUEPRINT.md` のモデル設計を Backend 側へ反映し、 API 化していく流れになります。
